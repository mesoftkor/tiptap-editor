{"version":3,"file":"TiptapEditor.svelte.js","sources":["../../src/svelte/TiptapEditor.svelte"],"sourcesContent":["<script lang=\"ts\">\r\n  import { onMount, onDestroy, tick } from 'svelte';\r\n  import { Editor } from '@tiptap/core';\r\n  import {\r\n    getDefaultExtensions,\r\n    addSlashCommandExtension,\r\n    getDefaultSlashItems,\r\n    uploadImageToS3,\r\n    fileToDataUrl,\r\n    type TiptapEditorBaseProps,\r\n    type UploadConfig,\r\n    type SlashCommandItem\r\n  } from '../core';\r\n  import SlashCommandMenu from './SlashCommandMenu.svelte';\r\n\r\n  let {\r\n    content = '',\r\n    placeholder = '내용을 입력하세요...',\r\n    editable = true,\r\n    minHeight = '200px',\r\n    uploadCategory = 'notice',\r\n    initialImages = [],\r\n    onImageUpload,\r\n    onUnusedImagesChange,\r\n    onContentChange,\r\n    uploadConfig\r\n  }: TiptapEditorBaseProps & { uploadConfig?: UploadConfig } = $props();\r\n\r\n  let editor: Editor | null = null;\r\n  let element: HTMLElement;\r\n  let isActive = $state(false);\r\n  let fileInput: HTMLInputElement | null = null;\r\n\r\n  // 업로드된 모든 이미지 URL 추적\r\n  let uploadedImageUrls = $state(new Set<string>());\r\n\r\n  // 에디터 상태\r\n  let editorState = $state({\r\n    canUndo: false,\r\n    canRedo: false,\r\n    isUpdated: 0\r\n  });\r\n\r\n  // 슬래시 명령 메뉴 상태\r\n  let showSlashMenu = $state(false);\r\n  let slashMenuItems = $state<SlashCommandItem[]>([]);\r\n  let slashMenuSelectedIndex = $state(0);\r\n  let slashMenuPosition = $state({ top: 0, left: 0 });\r\n  let slashMenuProps: any = null;\r\n\r\n  let isInternalUpdate = false;\r\n\r\n  onMount(async () => {\r\n    await tick();\r\n\r\n    // 초기 이미지 추가\r\n    if (initialImages && initialImages.length > 0) {\r\n      initialImages.forEach((url) => {\r\n        if (url && !url.startsWith('data:') && !url.startsWith('blob:')) {\r\n          uploadedImageUrls.add(url);\r\n        }\r\n      });\r\n    }\r\n\r\n    // 초기 이미지가 없으면 HTML에서 추출\r\n    if (uploadedImageUrls.size === 0 && content) {\r\n      const htmlImgRegex = /<img[^>]+src=\"([^\"]+)\"/g;\r\n      let m: RegExpExecArray | null;\r\n      while ((m = htmlImgRegex.exec(content)) !== null) {\r\n        const url = m[1];\r\n        if (url && !url.startsWith('data:') && !url.startsWith('blob:')) {\r\n          uploadedImageUrls.add(url);\r\n        }\r\n      }\r\n    }\r\n\r\n    // 기본 확장 가져오기\r\n    let extensions = getDefaultExtensions({ editable, placeholder });\r\n\r\n    // editable 모드에서 슬래시 명령 추가\r\n    if (editable) {\r\n      extensions = addSlashCommandExtension(extensions, {\r\n        items: ({ query }: { query: string }) => getDefaultSlashItems({ query }),\r\n        render: () => ({\r\n          onStart: (props: any) => {\r\n            slashMenuProps = props;\r\n            slashMenuItems = props.items;\r\n            slashMenuSelectedIndex = 0;\r\n            showSlashMenu = true;\r\n\r\n            const { clientRect } = props;\r\n            if (clientRect) {\r\n              const rect = clientRect();\r\n              if (rect) {\r\n                slashMenuPosition = {\r\n                  top: rect.bottom + window.scrollY + 8,\r\n                  left: rect.left + window.scrollX\r\n                };\r\n              }\r\n            }\r\n          },\r\n          onUpdate: (props: any) => {\r\n            slashMenuProps = props;\r\n            slashMenuItems = props.items;\r\n            slashMenuSelectedIndex = 0;\r\n\r\n            const { clientRect } = props;\r\n            if (clientRect) {\r\n              const rect = clientRect();\r\n              if (rect) {\r\n                slashMenuPosition = {\r\n                  top: rect.bottom + window.scrollY + 8,\r\n                  left: rect.left + window.scrollX\r\n                };\r\n              }\r\n            }\r\n          },\r\n          onKeyDown: (props: any) => {\r\n            if (props.event.key === 'ArrowUp') {\r\n              slashMenuSelectedIndex =\r\n                (slashMenuSelectedIndex + slashMenuItems.length - 1) % slashMenuItems.length;\r\n              return true;\r\n            }\r\n            if (props.event.key === 'ArrowDown') {\r\n              slashMenuSelectedIndex = (slashMenuSelectedIndex + 1) % slashMenuItems.length;\r\n              return true;\r\n            }\r\n            if (props.event.key === 'Enter') {\r\n              if (slashMenuItems[slashMenuSelectedIndex]) {\r\n                selectSlashItem(slashMenuSelectedIndex);\r\n              }\r\n              return true;\r\n            }\r\n            if (props.event.key === 'Escape') {\r\n              showSlashMenu = false;\r\n              return true;\r\n            }\r\n            return false;\r\n          },\r\n          onExit: () => {\r\n            showSlashMenu = false;\r\n            slashMenuProps = null;\r\n          }\r\n        })\r\n      });\r\n    }\r\n\r\n    editor = new Editor({\r\n      element: element,\r\n      extensions,\r\n      content: content || '',\r\n      editable,\r\n      onTransaction: ({ editor }) => {\r\n        editorState.canUndo = editor.can().undo();\r\n        editorState.canRedo = editor.can().redo();\r\n        editorState.isUpdated++;\r\n      },\r\n      onUpdate: ({ editor }) => {\r\n        if (!isInternalUpdate && onContentChange) {\r\n          const newContent = editor.getHTML();\r\n          onContentChange(newContent);\r\n        }\r\n      },\r\n      onFocus: () => {\r\n        isActive = true;\r\n      },\r\n      onBlur: () => {\r\n        isActive = false;\r\n      },\r\n      editorProps: {\r\n        attributes: {\r\n          class: 'mesoft-tiptap-content'\r\n        },\r\n        handlePaste: (_view, event) => {\r\n          const items = event.clipboardData?.items;\r\n          if (!items) return false;\r\n          for (const item of items) {\r\n            if (item.type.startsWith('image/')) {\r\n              const file = item.getAsFile();\r\n              if (file) {\r\n                uploadAndInsertImage(file);\r\n                return true;\r\n              }\r\n            }\r\n          }\r\n          return false;\r\n        },\r\n        handleDrop: (_view, event) => {\r\n          const dt = event.dataTransfer;\r\n          if (!dt || !dt.files?.length) return false;\r\n          for (const file of Array.from(dt.files)) {\r\n            if (file.type.startsWith('image/')) {\r\n              uploadAndInsertImage(file);\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  onDestroy(() => {\r\n    if (editor) {\r\n      editor.destroy();\r\n    }\r\n  });\r\n\r\n  function selectSlashItem(index: number) {\r\n    const item = slashMenuItems[index];\r\n    if (item && slashMenuProps && editor) {\r\n      item.command({ editor, range: slashMenuProps.range });\r\n      showSlashMenu = false;\r\n    }\r\n  }\r\n\r\n  function toggleBold() {\r\n    editor?.chain().focus().toggleBold().run();\r\n  }\r\n\r\n  function toggleItalic() {\r\n    editor?.chain().focus().toggleItalic().run();\r\n  }\r\n\r\n  function toggleUnderline() {\r\n    editor?.chain().focus().toggleUnderline().run();\r\n  }\r\n\r\n  function toggleStrike() {\r\n    editor?.chain().focus().toggleStrike().run();\r\n  }\r\n\r\n  function toggleCode() {\r\n    editor?.chain().focus().toggleCode().run();\r\n  }\r\n\r\n  function setHeading(level: 1 | 2 | 3) {\r\n    editor?.chain().focus().toggleHeading({ level }).run();\r\n  }\r\n\r\n  function setParagraph() {\r\n    editor?.chain().focus().setParagraph().run();\r\n  }\r\n\r\n  function toggleBulletList() {\r\n    editor?.chain().focus().toggleBulletList().run();\r\n  }\r\n\r\n  function toggleOrderedList() {\r\n    editor?.chain().focus().toggleOrderedList().run();\r\n  }\r\n\r\n  function toggleCodeBlock() {\r\n    editor?.chain().focus().toggleCodeBlock().run();\r\n  }\r\n\r\n  function toggleBlockquote() {\r\n    editor?.chain().focus().toggleBlockquote().run();\r\n  }\r\n\r\n  function setTextAlign(align: 'left' | 'center' | 'right' | 'justify') {\r\n    editor?.chain().focus().setTextAlign(align).run();\r\n  }\r\n\r\n  function addLink() {\r\n    const url = window.prompt('URL을 입력하세요:');\r\n    if (url) {\r\n      let finalUrl = url;\r\n      if (!url.match(/^https?:\\/\\//)) {\r\n        finalUrl = `https://${url}`;\r\n      }\r\n      editor?.chain().focus().setLink({ href: finalUrl }).run();\r\n    }\r\n  }\r\n\r\n  function removeLink() {\r\n    editor?.chain().focus().unsetLink().run();\r\n  }\r\n\r\n  async function addImageEnhanced() {\r\n    const url = window.prompt('이미지 URL을 입력하거나 취소하면 파일 업로드 창이 열립니다.');\r\n    if (url && url.trim()) {\r\n      const finalUrl = url.match(/^https?:\\/\\//) ? url : `https://${url}`;\r\n      editor?.chain().focus().setImage({ src: finalUrl }).run();\r\n      return;\r\n    }\r\n    fileInput?.click();\r\n  }\r\n\r\n  async function onFileSelected(e: Event) {\r\n    const input = e.target as HTMLInputElement;\r\n    if (!input.files || input.files.length === 0) return;\r\n    const file = input.files[0];\r\n    await uploadAndInsertImage(file);\r\n    input.value = '';\r\n  }\r\n\r\n  async function uploadAndInsertImage(file: File) {\r\n    if (!editor) return;\r\n\r\n    const blobUrl = URL.createObjectURL(file);\r\n    const { selection } = editor.state;\r\n    const insertPos = selection.$anchor.pos;\r\n\r\n    editor\r\n      .chain()\r\n      .insertContentAt(insertPos, {\r\n        type: 'image',\r\n        attrs: { src: blobUrl }\r\n      })\r\n      .run();\r\n\r\n    try {\r\n      let resultSrc: string;\r\n      let attrs: { src: string; alt?: string; title?: string };\r\n\r\n      if (onImageUpload) {\r\n        const res = await onImageUpload(file);\r\n        if (typeof res === 'string') {\r\n          resultSrc = res;\r\n          attrs = { src: resultSrc };\r\n        } else {\r\n          attrs = res;\r\n          resultSrc = res.src;\r\n        }\r\n      } else {\r\n        try {\r\n          resultSrc = await uploadImageToS3(file, uploadCategory, uploadConfig);\r\n          attrs = { src: resultSrc };\r\n        } catch (e) {\r\n          const errorMessage = e instanceof Error ? e.message : String(e);\r\n\r\n          if (errorMessage.includes('CORS')) {\r\n            console.warn('⚠️ S3 CORS 설정 필요:', errorMessage);\r\n            console.warn('→ Data URL로 폴백됩니다.');\r\n          } else {\r\n            console.error('S3 업로드 실패, Data URL로 폴백:', e);\r\n          }\r\n\r\n          resultSrc = await fileToDataUrl(file);\r\n          attrs = { src: resultSrc };\r\n        }\r\n      }\r\n\r\n      const { state } = editor;\r\n      const imagePos = findImagePositionByUrl(state, blobUrl);\r\n\r\n      if (imagePos !== null) {\r\n        const tr = editor.state.tr.setNodeMarkup(imagePos, undefined, attrs as any);\r\n        editor.view.dispatch(tr);\r\n      }\r\n\r\n      if (!resultSrc.startsWith('data:') && !resultSrc.startsWith('blob:')) {\r\n        uploadedImageUrls.add(resultSrc);\r\n      }\r\n    } catch (err) {\r\n      console.error('이미지 업로드 실패:', err);\r\n      editor.commands.undo();\r\n    } finally {\r\n      URL.revokeObjectURL(blobUrl);\r\n    }\r\n  }\r\n\r\n  function findImagePositionByUrl(\r\n    state: import('@tiptap/pm/state').EditorState,\r\n    url: string\r\n  ): number | null {\r\n    let pos: number | null = null;\r\n    state.doc.descendants((node, position) => {\r\n      if (node.type.name === 'image' && node.attrs.src === url) {\r\n        pos = position;\r\n      }\r\n    });\r\n    return pos;\r\n  }\r\n\r\n  function getCurrentImageUrls(): Set<string> {\r\n    const urls = new Set<string>();\r\n    if (!editor) return urls;\r\n\r\n    editor.state.doc.descendants((node) => {\r\n      if (node.type.name === 'image' && node.attrs.src) {\r\n        const src = node.attrs.src;\r\n        if (!src.startsWith('data:') && !src.startsWith('blob:')) {\r\n          urls.add(src);\r\n        }\r\n      }\r\n    });\r\n\r\n    return urls;\r\n  }\r\n\r\n  function calculateUnusedImages() {\r\n    if (!onUnusedImagesChange) return;\r\n\r\n    const currentUrls = getCurrentImageUrls();\r\n    const unusedUrls: string[] = [];\r\n\r\n    uploadedImageUrls.forEach((url) => {\r\n      if (!currentUrls.has(url)) {\r\n        unusedUrls.push(url);\r\n      }\r\n    });\r\n\r\n    onUnusedImagesChange(unusedUrls);\r\n  }\r\n\r\n  $effect(() => {\r\n    const currentUpdate = editorState.isUpdated;\r\n\r\n    if (editor && uploadedImageUrls.size > 0) {\r\n      calculateUnusedImages();\r\n    }\r\n  });\r\n\r\n  function undo() {\r\n    editor?.chain().focus().undo().run();\r\n  }\r\n\r\n  function redo() {\r\n    editor?.chain().focus().redo().run();\r\n  }\r\n</script>\r\n\r\n{#if editable}\r\n  <div class=\"mesoft-tiptap-wrapper\">\r\n    <!-- Toolbar -->\r\n    <div class=\"mesoft-tiptap-toolbar\" onmousedown={(e) => e.preventDefault()}>\r\n      <!-- Text Style -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={setParagraph}\r\n          class=\"toolbar-btn\"\r\n          class:active={editorState.isUpdated >= 0 && editor?.isActive('paragraph')}\r\n          title=\"본문\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setHeading(1)}\r\n          class=\"toolbar-btn\"\r\n          class:active={editorState.isUpdated >= 0 && editor?.isActive('heading', { level: 1 })}\r\n          title=\"제목 1\"\r\n        >\r\n          H1\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setHeading(2)}\r\n          class=\"toolbar-btn\"\r\n          class:active={editorState.isUpdated >= 0 && editor?.isActive('heading', { level: 2 })}\r\n          title=\"제목 2\"\r\n        >\r\n          H2\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setHeading(3)}\r\n          class=\"toolbar-btn\"\r\n          class:active={editorState.isUpdated >= 0 && editor?.isActive('heading', { level: 3 })}\r\n          title=\"제목 3\"\r\n        >\r\n          H3\r\n        </button>\r\n        <input bind:this={fileInput} type=\"file\" accept=\"image/*\" onchange={onFileSelected} style=\"display: none;\" />\r\n      </div>\r\n\r\n      <!-- Text Formatting -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleBold}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('bold')}\r\n          title=\"굵게\"\r\n        >\r\n          <strong>B</strong>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleItalic}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('italic')}\r\n          title=\"기울임\"\r\n        >\r\n          <em>I</em>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleUnderline}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('underline')}\r\n          title=\"밑줄\"\r\n        >\r\n          <u>U</u>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleStrike}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('strike')}\r\n          title=\"취소선\"\r\n        >\r\n          <s>S</s>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleCode}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('code')}\r\n          title=\"코드\"\r\n        >\r\n          &lt;/&gt;\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Text Align -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setTextAlign('left')}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive({ textAlign: 'left' })}\r\n          title=\"왼쪽 정렬\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h10M4 18h14\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setTextAlign('center')}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive({ textAlign: 'center' })}\r\n          title=\"가운데 정렬\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M7 12h10M5 18h14\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={() => setTextAlign('right')}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive({ textAlign: 'right' })}\r\n          title=\"오른쪽 정렬\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M10 12h10M6 18h14\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Lists -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleBulletList}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('bulletList')}\r\n          title=\"글머리 기호\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleOrderedList}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('orderedList')}\r\n          title=\"번호 매기기\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Special Blocks -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleBlockquote}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('blockquote')}\r\n          title=\"인용\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={toggleCodeBlock}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('codeBlock')}\r\n          title=\"코드 블록\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Link & Image -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={addLink}\r\n          class=\"toolbar-btn\"\r\n          class:active={editor?.isActive('link')}\r\n          title=\"링크\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\r\n          </svg>\r\n        </button>\r\n        {#if editor?.isActive('link')}\r\n          <button\r\n            type=\"button\"\r\n            onclick={removeLink}\r\n            class=\"toolbar-btn remove-link\"\r\n            title=\"링크 제거\"\r\n          >\r\n            <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        {/if}\r\n        <button\r\n          type=\"button\"\r\n          onclick={addImageEnhanced}\r\n          class=\"toolbar-btn\"\r\n          title=\"이미지\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Undo/Redo -->\r\n      <div class=\"toolbar-group\">\r\n        <button\r\n          type=\"button\"\r\n          onclick={undo}\r\n          class=\"toolbar-btn\"\r\n          disabled={!editorState.canUndo}\r\n          title=\"실행 취소\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6\" />\r\n          </svg>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onclick={redo}\r\n          class=\"toolbar-btn\"\r\n          disabled={!editorState.canRedo}\r\n          title=\"다시 실행\"\r\n        >\r\n          <svg class=\"icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 10h-10a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Editor Content -->\r\n    <div class=\"mesoft-tiptap-content-wrapper\" style=\"min-height: {minHeight};\">\r\n      <div bind:this={element} class=\"mesoft-tiptap-editor\"></div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Slash Command Menu -->\r\n  {#if showSlashMenu && slashMenuItems.length > 0}\r\n    <div\r\n      class=\"mesoft-slash-menu-container\"\r\n      style=\"position: fixed; top: {slashMenuPosition.top}px; left: {slashMenuPosition.left}px; z-index: 50;\"\r\n    >\r\n      <SlashCommandMenu\r\n        items={slashMenuItems}\r\n        selectedIndex={slashMenuSelectedIndex}\r\n        onSelect={selectSlashItem}\r\n      />\r\n    </div>\r\n  {/if}\r\n{:else}\r\n  <!-- Read-only view -->\r\n  <div bind:this={element} class=\"mesoft-tiptap-readonly\"></div>\r\n{/if}\r\n\r\n<style>\r\n  .mesoft-tiptap-wrapper {\r\n    border: 1px solid #e2e8f0;\r\n    border-radius: 0.375rem;\r\n    background: white;\r\n  }\r\n\r\n  .mesoft-tiptap-toolbar {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 0.25rem;\r\n    border-bottom: 1px solid #e2e8f0;\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .toolbar-group {\r\n    display: flex;\r\n    gap: 0.125rem;\r\n    border-right: 1px solid #e2e8f0;\r\n    padding-right: 0.5rem;\r\n  }\r\n\r\n  .toolbar-group:last-child {\r\n    border-right: none;\r\n  }\r\n\r\n  .toolbar-btn {\r\n    padding: 0.375rem;\r\n    border: none;\r\n    background: transparent;\r\n    border-radius: 0.25rem;\r\n    cursor: pointer;\r\n    transition: background-color 0.15s;\r\n    font-size: 0.875rem;\r\n    color: #1e293b;\r\n  }\r\n\r\n  .toolbar-btn:hover {\r\n    background-color: #f1f5f9;\r\n  }\r\n\r\n  .toolbar-btn.active {\r\n    background-color: #e2e8f0;\r\n  }\r\n\r\n  .toolbar-btn:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n\r\n  .toolbar-btn.remove-link {\r\n    color: #dc2626;\r\n  }\r\n\r\n  .toolbar-btn.remove-link:hover {\r\n    background-color: #fee2e2;\r\n  }\r\n\r\n  .icon {\r\n    width: 1rem;\r\n    height: 1rem;\r\n  }\r\n\r\n  .mesoft-tiptap-content-wrapper {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .mesoft-tiptap-readonly {\r\n    padding: 1rem;\r\n    line-height: 1.6;\r\n    color: #1e293b;\r\n  }\r\n\r\n  .mesoft-slash-menu-container {\r\n    animation: fadeIn 0.15s ease-in;\r\n  }\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(-4px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n\r\n  /* Dark mode support */\r\n  @media (prefers-color-scheme: dark) {\r\n    .mesoft-tiptap-wrapper {\r\n      background: #1e293b;\r\n      border-color: #334155;\r\n    }\r\n\r\n    .mesoft-tiptap-toolbar {\r\n      border-color: #334155;\r\n    }\r\n\r\n    .toolbar-group {\r\n      border-color: #334155;\r\n    }\r\n\r\n    .toolbar-btn {\r\n      color: #f1f5f9;\r\n    }\r\n\r\n    .toolbar-btn:hover {\r\n      background-color: #334155;\r\n    }\r\n\r\n    .toolbar-btn.active {\r\n      background-color: #475569;\r\n    }\r\n\r\n    .mesoft-tiptap-readonly {\r\n      color: #f1f5f9;\r\n    }\r\n  }\r\n</style>\r\n"],"names":["content","placeholder","editable","minHeight","uploadCategory","initialImages","$.prop","$$props","editor","element","isActive","fileInput","uploadedImageUrls","editorState","$.proxy","showSlashMenu","slashMenuItems","$.state","slashMenuSelectedIndex","slashMenuPosition","slashMenuProps","onMount","tick","url","htmlImgRegex","m","extensions","getDefaultExtensions","addSlashCommandExtension","query","getDefaultSlashItems","props","$.set","clientRect","rect","$.get","selectSlashItem","Editor","newContent","_view","event","items","_a","item","file","uploadAndInsertImage","dt","onDestroy","index","toggleBold","toggleItalic","toggleUnderline","toggleStrike","toggleCode","setHeading","level","setParagraph","toggleBulletList","toggleOrderedList","toggleCodeBlock","toggleBlockquote","setTextAlign","align","addLink","finalUrl","removeLink","addImageEnhanced","onFileSelected","e","input","blobUrl","selection","insertPos","resultSrc","attrs","res","uploadImageToS3","errorMessage","fileToDataUrl","state","imagePos","findImagePositionByUrl","tr","err","pos","node","position","getCurrentImageUrls","urls","src","calculateUnusedImages","currentUrls","unusedUrls","$.user_effect","undo","redo","button_1","button_2","button_3","$.bind_this","input_1","$$value","button_9","button_10","button_11","$$render","consequent","div_10","$.template_effect","$.set_style","div_11","consequent_1","button_19","button_20","div_12","consequent_2","alternate"],"mappings":"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"}